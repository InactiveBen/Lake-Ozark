---
/**
 * @file LiveLayout.astro
 * @module LiveLayout
 * @description A highly specialized layout for embedding a full-screen live video
 * stream, optimized for speed, minimal DOM, and rich media metadata.
 *
 * @prop {string} title - The title of the current stream/service (required).
 * @prop {string} [description] - A brief description of the stream content.
 */

// ----------------------------------------------------------------
// 1. Component Props and Defaults
// ----------------------------------------------------------------
interface Props {
  title: string;
  description?: string;
}
const { 
  title,
  description = "Watch live Sunday worship services from Lake Ozark Christian Church"
} = Astro.props;

// ----------------------------------------------------------------
// 2. Constants and Configuration (Metadata)
// ----------------------------------------------------------------
const SITE_NAME = "Lake Ozark Christian Church";
const BASE_URL = Astro.url.origin;

// Video Stream Configuration (Use environment variables for production streams)
const STREAM_URL_BASE = "https://customer-w9xtramr9fjat2m3.cloudflarestream.com/";
const STREAM_ID = "b49456d6a25da93af131a919453dc5ad"; // Placeholder ID
const EMBED_URL = `${STREAM_URL_BASE}${STREAM_ID}/iframe`;
const VIDEO_THUMBNAIL_URL = "https://cdn.lakeozarkdisciples.org/media/7767E813-185B-48B7-A7C8-A5C919258FEA.jpeg"; // Full URL is best

// ----------------------------------------------------------------
// 3. Structured Data (Schema.org JSON-LD)
// ----------------------------------------------------------------
// Use 'BroadcastEvent' or 'LiveBlogPosting' for live content, combined with VideoObject.
const jsonLd = {
  "@context": "https://schema.org",
  "@type": ["VideoObject", "LiveBlogPosting"], // Signal it's live content
  "name": title,
  "description": description,
  // Use ISO format for current date/time
  "uploadDate": new Date().toISOString(), 
  "contentUrl": EMBED_URL,
  "embedUrl": EMBED_URL,
  "thumbnailUrl": VIDEO_THUMBNAIL_URL,
  "isLiveBroadcast": true, // Crucial property for live SEO
  // You might want to add 'publication' info if you know the exact stream start/end times
};

// ----------------------------------------------------------------
// 4. Astro & Component Setup
// ----------------------------------------------------------------
---
<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
    <meta name="description" content={description} />
    
    <meta property="og:title" content={`${title} | ${SITE_NAME}`} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="video.other" /> <meta property="og:image" content={VIDEO_THUMBNAIL_URL} />
    <meta property="og:url" content={Astro.url.href} />
    <meta property="og:site_name" content={SITE_NAME} />
    <meta property="og:locale" content="en_US" />

    <meta name="twitter:card" content="player" /> 
    <meta name="twitter:title" content={`${title} | ${SITE_NAME}`} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={VIDEO_THUMBNAIL_URL} />
    <link rel="canonical" href={Astro.url.href} />
    <link rel="icon" type="image/png" href="https://cdn.lakeozarkdisciples.org/media/cropped-LOCC-shortcut.png" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Albert+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
    
    <title>{title} | {SITE_NAME}</title>

    <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
    
    <style>
      /* Reset for video clarity */
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        /* Ensure no scrolling and black background for seamless video */
        overflow: hidden;
      }
    </style>
  </head>
  <body class="h-full bg-black overflow-hidden" style="font-family: 'Albert Sans', system-ui, sans-serif;">
    <slot /> 
  </body>
</html>