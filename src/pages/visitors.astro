---
// Redirect to home page since visitors page is not public yet
return Astro.redirect('/');

import Layout from '../layouts/Layout.astro';
import HeroSection from '../components/HeroSection.astro';
import InfoCards from '../components/InfoCards.astro';
import ContentSection from '../components/ContentSection.astro';
import YouTubeVideoSection from '../components/YouTubeVideoSection.astro';

// Hero section data
const heroData = {
  backgroundImage: "http://cdn.lakeozarkdisciples.org/media/7767E813-185B-48B7-A7C8-A5C919258FEA.jpeg",
  backgroundAlt: "Church Sanctuary",
  tagline: "You are our honored guest",
  title: "Welcome to Our Church Family",
  description: "Whether you're visiting for the first time or considering making Lake Ozark Christian Church your spiritual home, we're delighted you're here. Experience our warm, welcoming community and discover what makes us special.",
  primaryButton: {
    text: "Plan Your Visit",
    href: "/worship#visitor-info"
  },
  secondaryButton: {
    text: "Get Directions",
    href: "https://www.google.com/maps/dir//Lake+Ozark+Christian+Church,+1560+Bagnell+Dam+Blvd,+Lake+Ozark,+MO+65049/@38.1981839,-92.6386717,19z/",
    external: true
  }
};

// Visitor information cards
const visitorCards = [
  {
    icon: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",
    title: "Service Times",
    subtitle: "Sun 8:30 AM & 10:30 AM",
    description: "Both services feature the same message and worship style. Arrive 10-15 minutes early to get settled."
  },
  {
    icon: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z",
    title: "Special Visitor Parking",
    subtitle: "Reserved Just for You",
    description: "We have designated visitor parking spaces right near the main entrance. Look for the 'Visitor Parking' signs!"
  },
  {
    icon: "M13 7h8m0 0v8m0-8l-8 8-4-4-6 6",
    title: "What to Expect",
    subtitle: "Casual & Welcoming",
    description: "Come as you are! Our service lasts about an hour, with contemporary worship and practical teaching."
  }
];

// Membership information
const membershipFeatures = [
  {
    icon: "M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z",
    title: "Join Our Community",
    description: "Become part of a loving, supportive church family that cares for one another"
  },
  {
    icon: "M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253",
    title: "Grow in Faith",
    description: "Participate in Bible studies, small groups, and spiritual growth opportunities"
  },
  {
    icon: "M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z",
    title: "Serve Others",
    description: "Use your gifts and talents to make a difference in our community and beyond"
  }
];
---

<Layout title="Visitors & New Members">
  <!-- Hero Section -->
  <HeroSection {...heroData} />

  <!-- Visitor Information -->
  <InfoCards 
    title="Plan Your Visit"
    subtitle="Everything You Need to Know"
    description="We want your first visit to be comfortable and meaningful. Here's what you can expect when you join us for worship."
    badge="Visitor Information"
    cards={visitorCards}
  />

  <!-- Welcome Video Section -->
  <YouTubeVideoSection 
    videoId="8Hxt2Dc1FlU"
    title="Get to Know Us"
    description="Watch this short video to learn more about our church family, our mission, and what makes Lake Ozark Christian Church a special place to worship and grow in faith."
    badge="Welcome Video"
    badgeText="Get to Know Us"
  />

  <!-- Becoming a Member Section -->
  <ContentSection 
    badge="New Members"
    title="Becoming Part of Our Family"
    description="We believe that church membership is about more than just attending services. It's about joining a community of believers who support, encourage, and grow together in Christ."
    content="<p>When you're ready to take the next step in your faith journey, we'd love to help you become a member of our church family. Membership is open to anyone who has accepted Jesus Christ as their Lord and Savior and desires to be part of our community.</p><p>Our membership process is simple and welcoming. We'll help you understand what it means to be a member and how you can get involved in our church family.</p>"
    imageUrl="http://cdn.lakeozarkdisciples.org/media/8F240771-48E1-4868-9BC6-6AB8256F433F.jpeg"
    imageAlt="Church community gathering"
    features={membershipFeatures}
    buttons={[
      {
        text: "Learn About Membership",
        href: "/about",
        primary: true
      },
      {
        text: "Contact Us",
        href: "/connect"
      }
    ]}
  />

  <!-- What to Expect Section -->
  <ContentSection 
    badge="First Time Visitors"
    title="Your First Sunday"
    description="We know visiting a new church can feel overwhelming. Here's exactly what to expect when you join us for worship."
    content="<p>From the moment you arrive, you'll be greeted with warm smiles and genuine hospitality. Our greeters will help you find your way around and answer any questions you might have.</p><p>During the service, you'll experience contemporary worship music, practical Bible teaching, and a welcoming atmosphere where you can be yourself. We don't expect you to know anyone or have everything figured out - just come as you are!</p>"
    imageUrl="https://cdn.lakeozarkdisciples.org/images/IMG_2755.jpg"
    imageAlt="Church service in progress"
    reverse={true}
    features={[
      {
        icon: "M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",
        title: "Easy Check-In",
        description: "Our friendly greeters will help you get oriented and answer any questions"
      },
      {
        icon: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",
        title: "One Hour Service",
        description: "Our worship service typically lasts about an hour with music, message, and fellowship"
      },
      {
        icon: "M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z",
        title: "Safe & Welcoming",
        description: "We provide a secure, loving environment for people of all ages and backgrounds"
      }
    ]}
    buttons={[
      {
        text: "Service Times",
        href: "/worship",
        primary: true
      },
      {
        text: "Children's Programs",
        href: "/children-youth"
      }
    ]}
  />

  <!-- Contact Information -->
  <section class="py-20 bg-white">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto text-center">
        <span class="inline-block px-4 py-2 bg-brand/10 text-brand text-sm font-medium mb-6">
          Get in Touch
        </span>
        <h2 class="text-4xl lg:text-5xl font-light mb-8 text-gray-900">Questions? We're Here to Help</h2>
        <p class="text-lg text-gray-600 mb-12 leading-relaxed">
          Have questions about visiting or becoming a member? We'd love to hear from you and help make your experience as smooth as possible.
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <a 
            href="tel:573-365-3366" 
            class="inline-flex items-center justify-center px-8 py-4 bg-brand hover:bg-brand-dark text-white font-medium rounded-lg transition-all duration-300"
          >
            Call Us: 573-365-3366
          </a>
          <a 
            href="/connect" 
            class="inline-flex items-center justify-center px-8 py-4 bg-gray-900 hover:bg-gray-800 text-white font-medium rounded-lg transition-all duration-300"
          >
            Send a Message
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Video Modal -->
  <div id="video-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4" onclick="closeVideoModal()">
    <div class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden" onclick="event.stopPropagation()">
      <div class="flex justify-between items-center p-4 border-b">
        <h3 id="video-modal-title" class="text-lg font-semibold text-gray-900"></h3>
        <button 
          onclick="closeVideoModal()" 
          class="text-gray-400 hover:text-gray-600 transition-colors"
          aria-label="Close video"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="aspect-video">
        <iframe 
          id="video-iframe"
          class="w-full h-full"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>
    </div>
  </div>
</Layout>

<script>
  // Video Modal Functions
  function openVideoModal(videoId: string, videoTitle: string) {
    const modal = document.getElementById('video-modal');
    const iframe = document.getElementById('video-iframe') as HTMLIFrameElement;
    const title = document.getElementById('video-modal-title');
    
    if (modal && iframe && title) {
      title.textContent = videoTitle;
      iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
      modal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
  }

  function closeVideoModal() {
    const modal = document.getElementById('video-modal');
    const iframe = document.getElementById('video-iframe') as HTMLIFrameElement;
    
    if (modal && iframe) {
      modal.classList.add('hidden');
      iframe.src = '';
      document.body.style.overflow = '';
    }
  }

  // Close modal when clicking outside or pressing Escape
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeVideoModal();
    }
  });

  // Make functions globally available
  (window as any).openVideoModal = openVideoModal;
  (window as any).closeVideoModal = closeVideoModal;
</script>

<style>
  * {
    font-family: 'Albert Sans', system-ui, sans-serif;
  }
  
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Albert Sans', system-ui, sans-serif;
  }

  /* Smooth scrolling for the entire page */
  html {
    scroll-behavior: smooth;
  }

  /* Ensure sections are properly centered when navigated to */
  section[id] {
    scroll-margin-top: 2rem;
  }

  /* For mobile devices, add more top margin */
  @media (max-width: 768px) {
    section[id] {
      scroll-margin-top: 1rem;
    }
  }
</style>
