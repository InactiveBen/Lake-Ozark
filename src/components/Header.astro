---
import { fade } from 'astro:transitions';
import AlertBanner from '../components/AlertBanner.astro';
import EventPromotion from '../components/EventPromotion.astro';
import AlertSmall from '../components/AlertSmall.astro';
import CookieBanner from '../components/CookieBanner.astro';
import SelfXSS from '../components/SelfXSS.astro';
import AccessibilityMenu from '../components/AccessibilityMenu.astro';


---
<SelfXSS />
<AccessibilityMenu />
<CookieBanner />


<header class="sticky top-0 w-full z-50 bg-white/95 backdrop-blur-md shadow-sm border-b border-gray-100" role="banner">
  <nav class="container mx-auto px-6" aria-label="Main navigation">
    <div class="flex justify-between items-center h-20">
      <!-- Logo -->
      <a href="/?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=navigation&utm_content=logo" class="flex items-center gap-4" aria-label="Lake Ozark Christian Church - Home">
        <img src="http://cdn.lakeozarkdisciples.org/media/LOCC-header.png" alt="Lake Ozark Christian Church Logo" class="h-12 rounded-lg" width="auto" height="48" />
      </a>
      
      
      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-8">
                 <!-- Attend Online -->
        <a 
          href="https://live.locc.us/?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=navigation"
          target="_blank"
          rel="noopener noreferrer"
          class="text-gray-700 hover:text-brand focus:text-brand focus:outline-none font-medium py-2 px-3 rounded-lg hover:bg-gray-50 transition-all duration-200"
        >
          Attend Online
        </a>
        <!-- Direct Links -->
        <a href="/worship?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=navigation&utm_content=sunday_services" class="text-gray-700 hover:text-brand focus:text-brand focus:outline-none font-medium py-2 px-3 rounded-lg hover:bg-gray-50 transition-all duration-200">Sunday Services</a>

        <a href="/children-youth?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=navigation&utm_content=children_youth" class="text-gray-700 hover:text-brand focus:text-brand focus:outline-none font-medium py-2 px-3 rounded-lg hover:bg-gray-50 transition-all duration-200">Children & Youth</a>
                
        <a href="/about?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=navigation&utm_content=about_us" class="text-gray-700 hover:text-brand focus:text-brand focus:outline-none font-medium py-2 px-3 rounded-lg hover:bg-gray-50 transition-all duration-200">About Us</a>
        
        
        <!-- About Dropdown -->
        <div class="relative group">
          <button 
            class="text-gray-700 hover:text-brand focus:text-brand focus:outline-none font-medium flex items-center gap-1.5 py-2 px-3 rounded-lg hover:bg-gray-50 transition-all duration-200"
            aria-expanded="false"
            aria-haspopup="true"
            aria-controls="about-menu"
            onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();this.setAttribute('aria-expanded', this.getAttribute('aria-expanded')==='true'?'false':'true');document.getElementById('about-menu').classList.toggle('hidden')}"
            onclick="this.setAttribute('aria-expanded', this.getAttribute('aria-expanded')==='true'?'false':'true');document.getElementById('about-menu').classList.toggle('hidden')"
          >
            More
            <svg class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div id="about-menu" class="absolute left-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-100 py-2 hidden" role="menu">
            <a href="/chimes?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=dropdown&utm_content=newsletter" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none rounded-lg mx-2" role="menuitem" tabindex="0">Newsletter</a>
            <a href="/staff?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=dropdown&utm_content=staff" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none rounded-lg mx-2" role="menuitem" tabindex="0">Staff</a>
            <a href="/weddings?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=dropdown&utm_content=weddings" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none rounded-lg mx-2" role="menuitem" tabindex="0">Weddings</a>
            <a href="/blog?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=dropdown&utm_content=blog" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none rounded-lg mx-2" role="menuitem" tabindex="0">Blog</a>
            <a href="/videos?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=dropdown&utm_content=service_videos" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none rounded-lg mx-2" role="menuitem" tabindex="0">Service Videos</a>
            <a href="/calendar?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=dropdown&utm_content=calendar" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none rounded-lg mx-2" role="menuitem" tabindex="0">Calendar</a>
            <a href="https://shelterinastorm.org/?utm_source=lakeozarkdisciples&ref=lakeozarkdisciples.org&utm_medium=header&utm_campaign=external&utm_content=shelter_storm" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none rounded-lg mx-2" role="menuitem" tabindex="0">Shelter in a Storm</a>
          </div>
        </div>        
        <!-- Donate Button -->
        <a 
          href="/giving?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=cta&utm_content=donate"
          class="bg-brand hover:bg-brand-dark focus:bg-brand-dark focus:outline-none text-white px-6 py-2.5 rounded-xl font-semibold transition-all duration-200 shadow-sm hover:shadow-md"
        >
          Donate
        </a>
      </div>
      
      <!-- Mobile Menu Button -->
      <button 
        class="md:hidden p-2.5 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none rounded-xl transition-all duration-200" 
        id="mobile-menu-button"
        aria-expanded="false"
        aria-controls="mobile-menu"
        aria-label="Toggle navigation menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 20 20" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>
    
    <!-- Mobile Menu -->
    <div class="md:hidden hidden bg-white rounded-xl mt-2 mb-4 shadow-lg border border-gray-100" id="mobile-menu" role="navigation" aria-label="Mobile navigation">
      <div class="px-4 pt-2 pb-3 space-y-1">
        <a href="/worship?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=sunday_services" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">Sunday Services</a>
        <a href="/children-youth?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=children_youth" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">Children & Youth</a>
        <a href="/about?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=about_us" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">About Us</a>
        
        <a 
          href="https://live.locc.us?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=navigation/"
          target="_blank"
          rel="noopener noreferrer"
          class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50"
        >
          Attend Online
        </a>
        
        <div class="border-b border-gray-100 pb-3 mb-3">
          <h2 class="font-semibold px-3 py-2 text-gray-800">More</h2>
          <a href="/chimes?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=newsletter" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">Newsletter</a>
          <a href="/staff?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=staff" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">Staff</a>
          <a href="/blog?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=blog" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">Blog</a>
          <a href="/videos?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=service_videos" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">Service Videos</a>
          <a href="/weddings?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=weddings" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">Weddings</a>
          <a href="/calendar?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=calendar" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">Calendar</a>
          <a href="https://shelterinastorm.org/?utm_source=lakeozarkdisciples&ref=lakeozarkdisciples.org&utm_medium=header&utm_campaign=external&utm_content=shelter_storm" class="block px-3 py-2 text-gray-700 hover:text-brand focus:text-brand focus:outline-none rounded-lg hover:bg-gray-50">Shelter in a Storm</a>
        </div>

        <a href="/giving?utm_source=lakeozarkdisciples&utm_medium=header&utm_campaign=mobile&utm_content=donate" class="block px-3 py-2 text-brand font-semibold hover:text-brand-dark focus:text-brand-dark focus:outline-none rounded-lg hover:bg-brand/5">Donate</a>
      </div>
    </div>
  </nav>
</header>


<script>
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuButton?.addEventListener('click', () => {
    const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
    mobileMenuButton.setAttribute('aria-expanded', (!isExpanded).toString());
    mobileMenu?.classList.toggle('hidden');
  });

  // Close dropdown menus when clicking outside
  document.addEventListener('click', (event) => {
    const dropdowns = ['about-menu'];
    dropdowns.forEach(id => {
      const menu = document.getElementById(id);
      const button = menu?.previousElementSibling;
      if (menu && button && !button.contains(event.target as Node)) {
        menu.classList.add('hidden');
        button.setAttribute('aria-expanded', 'false');
      }
    });
  });

  // Handle Escape key to close dropdowns
  document.addEventListener('keydown', (event) => {
    if (event.key === 'Escape') {
      const dropdowns = ['about-menu'];
      dropdowns.forEach(id => {
        const menu = document.getElementById(id);
        const button = menu?.previousElementSibling;
        if (menu && button) {
          menu.classList.add('hidden');
          button.setAttribute('aria-expanded', 'false');
        }
      });
    }
  });
</script>

<AlertSmall
  title="After School Program Canceled" 
  message="The after school program for Monday, February 12th, 2025 has been canceled due to inclement weather."
  type="brand"
  icon="info"
  messageId="weather-cancel-2025-02-12"
  expiresAt="2025-02-13"
  fullMessages={[
    {
      title: "After School Program Cancellation Details",
      message: "Due to forecasted inclement weather conditions, the after school program scheduled for Monday, February 12th, 2025 has been canceled.\n\nParents and guardians should make alternate arrangements for student pickup at regular dismissal time.\n\nWe apologize for any inconvenience this may cause.",
      icon: "info"
    }
  ]}
  readMoreText="View Full Details"
  showMailingList={false}
/>
